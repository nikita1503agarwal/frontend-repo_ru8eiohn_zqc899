@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-pixel: 'Press Start 2P', cursive;
    --font-arcade: 'VT323', monospace;
  }

  html {
    font-family: var(--font-sans);
    font-feature-settings: "rlig" 1, "calt" 1;
    background: #0b1020;
  }

  body {
    @apply antialiased text-white bg-[#0b1020];
  }
}

/* Global ambience overlays */
@layer components {
  .kb-noise {
    position: fixed;
    inset: 0;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/ filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
    z-index: 10;
  }
  .kb-scanlines {
    position: fixed;
    inset: 0;
    pointer-events: none;
    background: repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.03) 0px,
      rgba(255,255,255,0.03) 1px,
      transparent 2px,
      transparent 4px
    );
    z-index: 10;
  }
}

@layer utilities {
  .font-pixel { font-family: var(--font-pixel); }
  .font-arcade { font-family: var(--font-arcade); }
  .pixelated { image-rendering: pixelated; }

  /* Chunky pixel border */
  .pixel-border {
    position: relative;
    box-shadow:
      0 0 0 2px rgba(124,58,237,0.9),
      0 0 0 4px rgba(19, 12, 42, 1),
      0 0 24px rgba(124,58,237,0.55);
  }
  .pixel-border::before {
    content: "";
    position: absolute;
    inset: -6px;
    pointer-events: none;
    background: linear-gradient(90deg, rgba(124,58,237,0.35), rgba(236,72,153,0.25));
    filter: blur(12px);
    z-index: -1;
    border-radius: 10px;
  }

  .kb-dungeon-bricks {
    background-image: 
      radial-gradient(circle at 1px 1px, rgba(124,58,237,0.12) 1px, transparent 1px),
      linear-gradient(#0b1020 0 0),
      linear-gradient(90deg, rgba(255,255,255,0.04) 1px, transparent 1px),
      linear-gradient(rgba(255,255,255,0.04) 1px, transparent 1px);
    background-size: 2px 2px, 100% 100%, 40px 40px, 40px 40px;
    background-position: 0 0, 0 0, 0 0, 0 0;
    background-color: #0b1020;
  }

  .kb-divider {
    height: 12px;
    background:
      linear-gradient(to right, transparent, rgba(124,58,237,0.4), transparent) 0 50%/100% 2px no-repeat,
      repeating-linear-gradient(90deg, rgba(236,72,153,0.3) 0 8px, transparent 8px 16px);
    mask: linear-gradient(#000, #000) center/100% 100% no-repeat;
    opacity: .8;
  }

  .torch-glow {
    background: radial-gradient(120px 80px at var(--x,70%) 10%, rgba(236,72,153,0.15), transparent 70%),
                radial-gradient(160px 120px at var(--x2,30%) 20%, rgba(124,58,237,0.18), transparent 70%);
  }
}
